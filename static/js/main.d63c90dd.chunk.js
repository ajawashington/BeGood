(this.webpackJsonpbeygood=this.webpackJsonpbeygood||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/logo.44a0b38e.jpg"},,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},,,,function(e,t,n){e.exports=n(37)},,,,,function(e,t,n){e.exports=n.p+"static/media/formation.9ec30610.jpg"},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(19),c=n.n(s),o=n(2),l=n(7),u=n(4),i=r.a.createContext(),m=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],c=n[1],o=function(){return fetch("http://localhost:4444/charityRequests?_expand=user&_expand=business").then((function(e){return e.json()})).then(c)};return Object(a.useEffect)((function(){o()}),[]),Object(a.useEffect)((function(){console.log("****  CharityRequest APPLICATION STATE CHANGED  ****")}),[s]),r.a.createElement(i.Provider,{value:{charityRequests:s,addCharityRequest:function(e){return fetch("http://localhost:4444/charityRequests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)},deleteCharityRequest:function(e){return fetch("http://localhost:4444/charityRequests/".concat(e.id),{method:"DELETE"}).then(o)},updateCharityRequest:function(e){return fetch("http://localhost:4444/charityRequests/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)}}},e.children)},d=(n(12),r.a.createContext()),f=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],c=n[1],o=function(){return fetch("http://localhost:4444/donations?_expand=donor&_expand=user&_expand=business").then((function(e){return e.json()})).then(c)};return Object(a.useEffect)((function(){o()}),[]),Object(a.useEffect)((function(){console.log("****  DONATION APPLICATION STATE CHANGED  ****")}),[s]),r.a.createElement(d.Provider,{value:{donations:s,addDonation:function(e){return fetch("http://localhost:4444/donations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)}}},e.children)},h=(n(27),function(e){var t=e.charityRequest,n=e.history,s=e.match,c=Object(a.useContext)(i).deleteCharityRequest,o=Object(a.useContext)(d).addDonation,l=function(){o({id:t.id,issue:t.issue,amount:t.amount,item:t.item,userId:t.userId,businessId:t.businessId,donorId:parseInt(localStorage.getItem("beyGood_user"),10)})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"charityRequest"},r.a.createElement("div",null,r.a.createElement("img",{className:"img",src:t.user.url}),r.a.createElement("h3",null,t.user.tagName," needs ",t.item,".")),r.a.createElement("div",null,'The issue is "',t.issue,'"'),r.a.createElement("div",{className:"charityRequest__amount"},"This will cost ",t.amount," at ",t.business.name),function(e,t){return e.userId===parseInt(localStorage.getItem("beyGood_user"),10)?r.a.createElement("div",null,r.a.createElement("button",{className:"active__charityRequest",onClick:function(){t.push("/".concat(e.id))}},"Edit"),r.a.createElement("button",{onClick:function(){"/"===s.url?c(e):c(e).then((function(){t.push("/donor")}))}},"Delete")):r.a.createElement("button",{className:"donate",id:"charityRequest--".concat(e.donor),onClick:function(){window.alert("'OK' to Confirm Donation"),l(),c(e)}},"DONATE")}(t,n)))}),E=function(e){var t=Object(a.useContext)(i).charityRequests.sort((function(e){return e.id===parseInt(localStorage.getItem("beyGood_user"))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"donationHeader"},"PENDING REQUESTS"),r.a.createElement("div",{className:"charityRequests"},t.map((function(t){return r.a.createElement(h,Object.assign({key:t.id,charityRequest:t},e))}))))},p=r.a.createContext(),b=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],c=n[1],o=function(){return fetch("http://localhost:4444/businesses?_expand=businessType").then((function(e){return e.json()})).then(c)};return Object(a.useEffect)((function(){o()}),[]),Object(a.useEffect)((function(){console.log("****  Business APPLICATION STATE CHANGED  ****")}),[s]),r.a.createElement(p.Provider,{value:{businesses:s,addBusiness:function(e){return fetch("http://localhost:4444/businesses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)},updateBusiness:function(e){return fetch("http://localhost:4444/businesses/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)}}},e.children)},y=function(e){var t=Object(a.useContext)(i),n=t.addCharityRequest,s=t.updateCharityRequest,c=t.charityRequests,o=Object(a.useContext)(p).businesses,l=Object(a.useState)({}),m=Object(u.a)(l,2),d=m[0],f=m[1],h=Object(a.useRef)(0),E=e.match.params.hasOwnProperty("charityRequestId"),b=function(e){var t=Object.assign({},d);t[e.target.name]=e.target.value,f(t)};Object(a.useEffect)((function(){!function(){if(E){var t=parseInt(e.match.params.charityRequestId),n=c.find((function(e){return e.id===t}))||{};f(n)}}()}),[c,o]);return r.a.createElement("form",{className:"CharityRequestForm"},r.a.createElement("h2",{className:"CharityRequestForm__title"},E?"EDIT CHARITY REQUEST":"NEW CHARITY REQUEST"),r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"issue"},"Issue"),r.a.createElement("input",{type:"text",id:"issue",name:"issue",defaultValue:d.issue,required:!0,autoFocus:!0,className:"form-control",placeholder:"Charity Request Issue",proptype:"varchar",onChange:b}))),r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"text",id:"amount",name:"amount",defaultValue:d.amount,required:!0,className:"form-control",proptype:"varchar",placeholder:"Amount",onChange:b}))),r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"item"},"Item"),r.a.createElement("input",{type:"text",id:"item",name:"item",defaultValue:d.item,required:!0,className:"form-control",proptype:"varchar",placeholder:"Item",onChange:b}))),r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"business"},"Business "),r.a.createElement("select",{value:d.businessId,name:"businessId",ref:h,className:"form-control",onChange:b},r.a.createElement("option",{value:"0"},"Select a Business"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),r.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),function(){var t=parseInt(h.current.value);E?s({id:d.id,issue:d.issue,amount:d.amount,item:d.item,businessId:t,userId:parseInt(localStorage.getItem("beyGood_user"),10)}).then((function(){return e.history.push("/donor")})):n({issue:d.issue,amount:d.amount,item:d.item,businessId:t,userId:parseInt(localStorage.getItem("beyGood_user"),10)}).then((function(){return e.history.push("/donor")}))}()},className:"btn btn-primary"}," ",E?"Update Charity Request":"Make Charity Request"," "))},g=function(e){var t=e.donation;return r.a.createElement("section",{className:"donation"},r.a.createElement("div",null,t.user.tagName,r.a.createElement("div",null,r.a.createElement("img",{className:"img",src:t.user.url}))),"Thank you for your generous donation you made to ",t.user.tagName," for the amount of ",t.amount,"! The collaboration with ",t.business.name," helped ",t.user.tagName," tremendously.",r.a.createElement("h3",null," DONOR: ",t.donor.tagName))},N=(n(28),function(e){var t=Object(a.useContext)(d).donations,n=Object(a.useContext)(i).charityRequests,s=t.filter((function(e){return e.donorId===parseInt(localStorage.getItem("beyGood_user"))})),c=n.filter((function(e){return e.userId===parseInt(localStorage.getItem("beyGood_user"))})),o=t.filter((function(e){return e.userId===parseInt(localStorage.getItem("beyGood_user"))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"requests"},r.a.createElement("div",{className:"pending"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"REQUESTS: PENDING")),r.a.createElement("div",{className:"pendingCards"},c.map((function(t){return r.a.createElement(h,Object.assign({key:t.id,charityRequest:t},e))})))),r.a.createElement("div",null,r.a.createElement("div",{className:"completed"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"REQUESTS: COMPLETED"))),r.a.createElement("div",{className:"completedCards"},o.map((function(t){return r.a.createElement(g,Object.assign({key:t.id,donation:t},e))})))),r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"YOUR DONATIONS")),r.a.createElement("div",null,s.map((function(t){return r.a.createElement(g,Object.assign({key:t.id,donation:t},e))}))))))}),v=r.a.createContext(),O=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){fetch("http://localhost:4444/businessTypes").then((function(e){return e.json()})).then(c)}),[]),Object(a.useEffect)((function(){}),[s]),r.a.createElement(v.Provider,{value:{businessTypes:s}},e.children)},I=r.a.createContext(),j=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),s=n[0],c=n[1],o=function(){return fetch("http://localhost:4444/donors?_expand=user").then((function(e){return e.json()})).then(c)};return Object(a.useEffect)((function(){o()}),[]),Object(a.useEffect)((function(){console.log("****  Donor APPLICATION STATE CHANGED  ****")}),[s]),r.a.createElement(I.Provider,{value:{donors:s,addDonor:function(e){return fetch("http://localhost:4444/donors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o)}}},e.children)},C=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,null,r.a.createElement(f,null,r.a.createElement(j,null,r.a.createElement(O,null,r.a.createElement(b,null,e.children))))))},S=function(e){var t=e.business;return r.a.createElement("div",{className:"businesses"},r.a.createElement("div",{className:"business__item"},r.a.createElement("div",null,r.a.createElement("h1",{className:"business__link"},r.a.createElement(o.b,{className:"business__link",to:"/businesses/".concat(t.id)},t.name))),r.a.createElement("div",null,r.a.createElement("h2",{className:"business__link"},t.businessType.type))))},T=(n(17),function(e){var t=Object(a.useContext)(p).businesses,n=Object(a.useContext)(v).businessTypes;return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",{className:"businessHeader"},"BUSINESS PARTNERS")),r.a.createElement("div",{className:"businesses"},t.map((function(e){var a=n.find((function(t){return t.id===e.businessTypeId}));return console.log(n,t),r.a.createElement(S,{key:e.id,businessType:a,business:e})}))))}),R=function(e){var t=Object(a.useContext)(p).businesses,n=Object(a.useContext)(d).donations,s=Object(a.useContext)(i).charityRequests,c=parseInt(e.match.params.businessId,10),o=t.find((function(e){return e.id===c}))||{},l=s.filter((function(e){return e.businessId===c})),u=n.filter((function(e){return e.businessId===c}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("section",{className:"businessHeader"},r.a.createElement("div",null,r.a.createElement("h1",null,o.name)),r.a.createElement("div",null),r.a.createElement("h4",null,"Address: ",o.address))),r.a.createElement("div",{className:"business__requests"},l.map((function(e){return r.a.createElement(h,{key:e.id,charityRequest:e})})),u.map((function(e){return r.a.createElement(g,{key:e.id,donation:e})}))))},_=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null,r.a.createElement(l.b,{exact:!0,path:"/business",render:function(e){return r.a.createElement(T,e)}}),r.a.createElement(l.b,{exact:!0,path:"/businesses/:businessId(\\d+)",render:function(e){return r.a.createElement(R,e)}}),r.a.createElement(l.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(y,e)}}),r.a.createElement(l.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(N,e)}}),r.a.createElement(l.b,{exact:!0,path:"/donor",render:function(e){return r.a.createElement(E,e)}}),r.a.createElement(l.b,{path:"/:charityRequestId(\\d+)",render:function(e){return r.a.createElement(y,e)}})))},q=(n(34),n(10)),P=n.n(q),x=function(e){return r.a.createElement("ul",{className:"navbar"},r.a.createElement(o.b,{className:"navbar__link",to:"/"},r.a.createElement("img",{src:P.a})),r.a.createElement("li",{className:"navbar__item"},r.a.createElement(o.b,{className:"navbar__link",to:"/donor"},"MAKE A DONATION")),r.a.createElement("li",{className:"navbar__item"},r.a.createElement(o.b,{className:"navbar__link",to:"/business"},"BUSINESS PARTNERS")),localStorage.getItem("beyGood_user")?r.a.createElement("li",{className:"navbar__item"},r.a.createElement(o.b,{className:"navbar__link",to:"",onClick:function(t){t.preventDefault(),localStorage.removeItem("beyGood_user"),e.history.push("/")}},"Logout")):"")},w=(n(18),function(e){var t=Object(a.useRef)(),n=Object(a.useRef)();return r.a.createElement("main",{className:"container--login"},r.a.createElement("section",null,r.a.createElement("form",{className:"form--login",onSubmit:function(a){a.preventDefault(),fetch("http://localhost:4444/users?tagName=".concat(t.current.value)).then((function(e){return e.json()})).then((function(e){return!!e.length&&e[0]})).then((function(a){a&&a.password===n.current.value?(localStorage.setItem("beyGood_user",a.id),e.history.push("/")):a&&a.password!==n.current.value?window.alert("Password does not match"):a||fetch("http://localhost:4444/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:t.current.value,password:n.current.value})}).then((function(e){return e.json()})).then((function(t){localStorage.setItem("beyGood_user",t.id),e.history.push("/")}))}))}},r.a.createElement("h1",null,r.a.createElement("img",{src:P.a})),r.a.createElement("h2",null,"Please sign in"),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"inputtagName"}," Tag Name "),r.a.createElement("input",{ref:t,type:"tagName",id:"tagName",className:"form-control",placeholder:"Enter Tag Name Here",required:!0,autoFocus:!0})),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"inputPassword"}," Password "),r.a.createElement("input",{ref:n,type:"password",id:"password",className:"form-control",placeholder:"Enter Password Here",required:!0})),r.a.createElement("fieldset",null,r.a.createElement("button",{type:"submit"},"Sign in")))),r.a.createElement("section",{className:"link--register"},r.a.createElement(o.b,{to:"/register"},"Not a member yet?")))}),A=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),s=Object(a.useRef)();return r.a.createElement("main",{style:{textAlign:"center"}},r.a.createElement("form",{className:"form--login",onSubmit:function(a){a.preventDefault(),n.current.value===s.current.value?fetch("http://localhost:4444/users?tagName=".concat(t.current.value)).then((function(e){return e.json()})).then((function(e){return!!e.length})).then((function(){fetch("http://localhost:4444/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:t.current.value,password:n.current.value})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("id")&&(localStorage.setItem("beyGood_user",t.id),e.history.push("/"))}))})):window.alert("Passwords do not match")}},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please Register for beyGood"),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"inputtagName"}," Tag Name "),r.a.createElement("input",{ref:t,type:"tagName",name:"tagName",className:"form-control",placeholder:"Tag Name",required:!0})),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"inputPassword"}," Password "),r.a.createElement("input",{ref:n,type:"password",name:"password",className:"form-control",placeholder:"Password",required:!0})),r.a.createElement("fieldset",null,r.a.createElement("label",{htmlFor:"verifyPassword"}," Verify Password "),r.a.createElement("input",{ref:s,type:"password",name:"verifyPassword",className:"form-control",placeholder:"Verify password",required:!0})),r.a.createElement("fieldset",null,r.a.createElement("button",{type:"submit"},"Sign in"))))};n(35),n(36);c.a.render(r.a.createElement(o.a,null,r.a.createElement((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{render:function(){return localStorage.getItem("beyGood_user")?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{render:function(e){return r.a.createElement(x,e)}}),r.a.createElement(l.b,{render:function(e){return r.a.createElement(_,e)}})):r.a.createElement(l.a,{to:"/login"})}}),r.a.createElement(l.b,{path:"/login",render:function(e){return r.a.createElement(w,e)}}),r.a.createElement(l.b,{path:"/register",render:function(e){return r.a.createElement(A,e)}}))}),null)),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.d63c90dd.chunk.js.map